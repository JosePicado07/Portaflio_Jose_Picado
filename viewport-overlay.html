<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viewport Overlay - Test Responsive</title>
    <style>
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
        }

        /* Overlay flotante */
        #viewport-overlay {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            z-index: 999999;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            min-width: 280px;
            backdrop-filter: blur(10px);
        }

        .overlay-header {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #10b981;
            color: #10b981;
        }

        .overlay-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 6px 0;
        }

        .overlay-label {
            color: #94a3b8;
        }

        .overlay-value {
            font-weight: bold;
            color: #10b981;
        }

        .breakpoint-indicator {
            margin-top: 15px;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
        }

        .bp-desktop {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .bp-tablet {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }

        .bp-mobile {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        .bp-conflict {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .media-queries {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.2);
        }

        .mq-item {
            display: flex;
            align-items: center;
            margin: 6px 0;
            font-size: 12px;
        }

        .mq-item .status {
            width: 20px;
            margin-right: 8px;
        }

        .active { color: #10b981; }
        .inactive { color: #64748b; }

        .toggle-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            z-index: 999999;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }

        .toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(102, 126, 234, 0.6);
        }

        .instructions {
            background: #f0f4ff;
            padding: 30px;
            max-width: 800px;
            margin: 50px auto;
            border-radius: 16px;
            border-left: 4px solid #667eea;
        }

        .instructions h1 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .instructions p {
            color: #475569;
            line-height: 1.8;
            margin: 10px 0;
        }

        .instructions code {
            background: #e2e8f0;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #667eea;
        }

        .step-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
        }

        .step-list li {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .step-list strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

    <!-- Overlay flotante -->
    <div id="viewport-overlay">
        <div class="overlay-header">üìè Viewport Monitor</div>

        <div class="overlay-row">
            <span class="overlay-label">Ancho:</span>
            <span class="overlay-value" id="width-display">-</span>
        </div>

        <div class="overlay-row">
            <span class="overlay-label">Alto:</span>
            <span class="overlay-value" id="height-display">-</span>
        </div>

        <div id="breakpoint-display" class="breakpoint-indicator bp-desktop">
            Desktop
        </div>

        <div class="media-queries">
            <div style="color: #94a3b8; font-size: 11px; margin-bottom: 8px;">Media Queries Activos:</div>
            <div class="mq-item">
                <span class="status" id="mq-1023">-</span>
                <span>‚â§1023px (Tablet)</span>
            </div>
            <div class="mq-item">
                <span class="status" id="mq-768">-</span>
                <span>‚â§768px ‚ö†Ô∏è</span>
            </div>
            <div class="mq-item">
                <span class="status" id="mq-767">-</span>
                <span>‚â§767px</span>
            </div>
            <div class="mq-item">
                <span class="status" id="mq-480">-</span>
                <span>‚â§480px (Small)</span>
            </div>
        </div>
    </div>

    <!-- Toggle button -->
    <button class="toggle-btn" id="toggle-btn">Ocultar Overlay</button>

    <!-- Instructions -->
    <div class="instructions">
        <h1>üîç Viewport Overlay - Herramienta de Diagn√≥stico</h1>
        <p>Esta herramienta te ayuda a diagnosticar problemas de media queries en tiempo real SIN usar la consola.</p>

        <h2 style="color: #667eea; margin-top: 30px;">üìã C√≥mo Usar:</h2>
        <ul class="step-list">
            <li>
                <strong>Paso 1: Abrir en tu navegador</strong>
                Abre este archivo <code>viewport-overlay.html</code> directamente en Chrome
            </li>
            <li>
                <strong>Paso 2: Cambiar el tama√±o</strong>
                Presiona <code>Ctrl + Shift + M</code> para modo responsive o arrastra el borde de la ventana
            </li>
            <li>
                <strong>Paso 3: Observar el overlay</strong>
                El cuadro flotante arriba a la derecha muestra:
                <br>‚Ä¢ Tama√±o del viewport en tiempo real
                <br>‚Ä¢ Breakpoint activo actual
                <br>‚Ä¢ Media queries que est√°n activos
            </li>
            <li>
                <strong>Paso 4: Buscar conflictos</strong>
                Si ves el overlay ROJO con "CONFLICTO", est√°s en la zona 767-768px
            </li>
        </ul>

        <h2 style="color: #667eea; margin-top: 30px;">üéØ Tama√±os Importantes a Probar:</h2>
        <ul class="step-list">
            <li><strong>1920px</strong> - Desktop Full HD (deber√≠a mostrar "Desktop" verde)</li>
            <li><strong>1024px</strong> - Tablet horizontal (deber√≠a mostrar "Tablet" azul)</li>
            <li><strong>768px</strong> - iPad vertical ‚ö†Ô∏è (zona de conflicto posible)</li>
            <li><strong>767px</strong> - Mobile grande ‚ö†Ô∏è (zona de conflicto posible)</li>
            <li><strong>480px</strong> - Mobile medio (deber√≠a mostrar "Mobile Small" morado)</li>
            <li><strong>375px</strong> - iPhone com√∫n (deber√≠a mostrar "Mobile Small" morado)</li>
        </ul>

        <h2 style="color: #667eea; margin-top: 30px;">‚ö†Ô∏è Qu√© Buscar:</h2>
        <p><strong>Zona de Conflicto 767-768px:</strong></p>
        <ul style="color: #475569; line-height: 2;">
            <li>Si ambos ‚â§768px y ‚â§767px muestran ‚úÖ, hay conflicto</li>
            <li>El overlay se pondr√° ROJO indicando problema</li>
            <li>Esto significa que ambos media queries est√°n activos al mismo tiempo</li>
            <li>Causa que los estilos se sobrescriban mutuamente</li>
        </ul>

        <p style="margin-top: 20px;"><strong>Bot√≥n Toggle:</strong> Usa el bot√≥n abajo a la derecha para mostrar/ocultar el overlay si molesta.</p>
    </div>

    <script>
        // Elements
        const overlay = document.getElementById('viewport-overlay');
        const widthDisplay = document.getElementById('width-display');
        const heightDisplay = document.getElementById('height-display');
        const breakpointDisplay = document.getElementById('breakpoint-display');
        const toggleBtn = document.getElementById('toggle-btn');

        const mq1023 = document.getElementById('mq-1023');
        const mq768 = document.getElementById('mq-768');
        const mq767 = document.getElementById('mq-767');
        const mq480 = document.getElementById('mq-480');

        // Media queries
        const mediaQueries = {
            mq1023: window.matchMedia('(max-width: 1023px)'),
            mq768: window.matchMedia('(max-width: 768px)'),
            mq767: window.matchMedia('(max-width: 767px)'),
            mq480: window.matchMedia('(max-width: 480px)')
        };

        function updateOverlay() {
            const width = window.innerWidth;
            const height = window.innerHeight;

            // Update dimensions
            widthDisplay.textContent = `${width}px`;
            heightDisplay.textContent = `${height}px`;

            // Update media query status
            mq1023.textContent = mediaQueries.mq1023.matches ? '‚úÖ' : '‚ùå';
            mq1023.className = `status ${mediaQueries.mq1023.matches ? 'active' : 'inactive'}`;

            mq768.textContent = mediaQueries.mq768.matches ? '‚úÖ' : '‚ùå';
            mq768.className = `status ${mediaQueries.mq768.matches ? 'active' : 'inactive'}`;

            mq767.textContent = mediaQueries.mq767.matches ? '‚úÖ' : '‚ùå';
            mq767.className = `status ${mediaQueries.mq767.matches ? 'active' : 'inactive'}`;

            mq480.textContent = mediaQueries.mq480.matches ? '‚úÖ' : '‚ùå';
            mq480.className = `status ${mediaQueries.mq480.matches ? 'active' : 'inactive'}`;

            // Determine breakpoint
            let bpClass = 'bp-desktop';
            let bpText = 'Desktop';

            // Check for conflict
            const hasConflict = (width === 767 || width === 768) &&
                                mediaQueries.mq767.matches &&
                                mediaQueries.mq768.matches;

            if (hasConflict) {
                bpClass = 'bp-conflict';
                bpText = '‚ö†Ô∏è CONFLICTO 767-768px';
            } else if (width <= 480) {
                bpClass = 'bp-mobile';
                bpText = 'Mobile Small';
            } else if (width <= 767) {
                bpClass = 'bp-mobile';
                bpText = 'Mobile';
            } else if (width >= 768 && width <= 1023) {
                bpClass = 'bp-tablet';
                bpText = 'Tablet';
            }

            // Update breakpoint display
            breakpointDisplay.className = `breakpoint-indicator ${bpClass}`;
            breakpointDisplay.textContent = bpText;
        }

        // Toggle overlay
        let overlayVisible = true;
        toggleBtn.addEventListener('click', () => {
            overlayVisible = !overlayVisible;
            overlay.style.display = overlayVisible ? 'block' : 'none';
            toggleBtn.textContent = overlayVisible ? 'Ocultar Overlay' : 'Mostrar Overlay';
        });

        // Update on resize (debounced for performance)
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            updateOverlay(); // Update immediately for visual feedback
        });

        // Initial update
        updateOverlay();
    </script>
</body>
</html>
